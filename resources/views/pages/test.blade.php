<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
Test body

<div class="sign-in-step address-suggester-wrapper active" id="step-2">
    <select name="country_id" id="dentist-country" class="input country-select">
        <option value="1" code="af">Afghanistan</option>
        <option value="2" code="ax">Aland Islands</option>
        <option value="3" code="al">Albania</option>
        <option value="4" code="dz">Algeria</option>
        <option value="5" code="as">American Samoa</option>
        <option value="6" code="ad">Andorra</option>
        <option value="7" code="ao">Angola</option>
        <option value="8" code="ai">Anguilla</option>
        <option value="9" code="aq">Antarctica</option>
        <option value="10" code="ag">Antigua And Barbuda</option>
        <option value="11" code="ar">Argentina</option>
        <option value="12" code="am">Armenia</option>
        <option value="13" code="aw">Aruba</option>
        <option value="14" code="au">Australia</option>
        <option value="15" code="at">Austria</option>
        <option value="16" code="az">Azerbaijan</option>
        <option value="17" code="bs">Bahamas</option>
        <option value="18" code="bh">Bahrain</option>
        <option value="19" code="bd">Bangladesh</option>
        <option value="20" code="bb">Barbados</option>
        <option value="21" code="by">Belarus</option>
        <option value="22" code="be">Belgium</option>
        <option value="23" code="bz">Belize</option>
        <option value="24" code="bj">Benin</option>
        <option value="25" code="bm">Bermuda</option>
        <option value="26" code="bt">Bhutan</option>
        <option value="27" code="bo">Bolivia</option>
        <option value="28" code="ba">Bosnia And Herzegovina</option>
        <option value="29" code="bw">Botswana</option>
        <option value="30" code="bv">Bouvet Island</option>
        <option value="31" code="br">Brazil</option>
        <option value="32" code="io">British Indian Ocean Territory</option>
        <option value="33" code="bn">Brunei Darussalam</option>
        <option value="34" code="bg" selected="selected">Bulgaria</option>
        <option value="35" code="bf">Burkina Faso</option>
        <option value="36" code="bi">Burundi</option>
        <option value="37" code="kh">Cambodia</option>
        <option value="38" code="cm">Cameroon</option>
        <option value="39" code="ca">Canada</option>
        <option value="40" code="cv">Cape Verde</option>
        <option value="41" code="ky">Cayman Islands</option>
        <option value="42" code="cf">Central African Republic</option>
        <option value="43" code="td">Chad</option>
        <option value="44" code="cl">Chile</option>
        <option value="45" code="cn">China</option>
        <option value="46" code="cx">Christmas Island</option>
        <option value="47" code="cc">Cocos (Keeling) Islands</option>
        <option value="48" code="co">Colombia</option>
        <option value="49" code="km">Comoros</option>
        <option value="50" code="cg">Congo</option>
        <option value="51" code="cd">Congo, Democratic Republic</option>
        <option value="52" code="ck">Cook Islands</option>
        <option value="53" code="cr">Costa Rica</option>
        <option value="54" code="ci">Cote D'Ivoire</option>
        <option value="55" code="hr">Croatia</option>
        <option value="56" code="cu">Cuba</option>
        <option value="57" code="cy">Cyprus</option>
        <option value="58" code="cz">Czech Republic</option>
        <option value="59" code="dk">Denmark</option>
        <option value="60" code="dj">Djibouti</option>
        <option value="61" code="dm">Dominica</option>
        <option value="62" code="do">Dominican Republic</option>
        <option value="63" code="ec">Ecuador</option>
        <option value="64" code="eg">Egypt</option>
        <option value="65" code="sv">El Salvador</option>
        <option value="66" code="gq">Equatorial Guinea</option>
        <option value="67" code="er">Eritrea</option>
        <option value="68" code="ee">Estonia</option>
        <option value="69" code="et">Ethiopia</option>
        <option value="70" code="fk">Falkland Islands (Malvinas)</option>
        <option value="71" code="fo">Faroe Islands</option>
        <option value="72" code="fj">Fiji</option>
        <option value="73" code="fi">Finland</option>
        <option value="74" code="fr">France</option>
        <option value="75" code="gf">French Guiana</option>
        <option value="76" code="pf">French Polynesia</option>
        <option value="77" code="tf">French Southern Territories</option>
        <option value="78" code="ga">Gabon</option>
        <option value="79" code="gm">Gambia</option>
        <option value="80" code="ge">Georgia</option>
        <option value="81" code="de">Germany</option>
        <option value="82" code="gh">Ghana</option>
        <option value="83" code="gi">Gibraltar</option>
        <option value="84" code="gr">Greece</option>
        <option value="85" code="gl">Greenland</option>
        <option value="86" code="gd">Grenada</option>
        <option value="87" code="gp">Guadeloupe</option>
        <option value="88" code="gu">Guam</option>
        <option value="89" code="gt">Guatemala</option>
        <option value="90" code="gg">Guernsey</option>
        <option value="91" code="gn">Guinea</option>
        <option value="92" code="gw">Guinea-Bissau</option>
        <option value="93" code="gy">Guyana</option>
        <option value="94" code="ht">Haiti</option>
        <option value="95" code="hm">Heard Island &amp; Mcdonald Islands</option>
        <option value="96" code="va">Holy See (Vatican City State)</option>
        <option value="97" code="hn">Honduras</option>
        <option value="98" code="hk">Hong Kong</option>
        <option value="99" code="hu">Hungary</option>
        <option value="100" code="is">Iceland</option>
        <option value="101" code="in">India</option>
        <option value="102" code="id">Indonesia</option>
        <option value="103" code="ir">Iran, Islamic Republic Of</option>
        <option value="104" code="iq">Iraq</option>
        <option value="105" code="ie">Ireland</option>
        <option value="106" code="im">Isle Of Man</option>
        <option value="107" code="il">Israel</option>
        <option value="108" code="it">Italy</option>
        <option value="109" code="jm">Jamaica</option>
        <option value="110" code="jp">Japan</option>
        <option value="111" code="je">Jersey</option>
        <option value="112" code="jo">Jordan</option>
        <option value="113" code="kz">Kazakhstan</option>
        <option value="114" code="ke">Kenya</option>
        <option value="115" code="ki">Kiribati</option>
        <option value="116" code="kr">Korea</option>
        <option value="117" code="kw">Kuwait</option>
        <option value="118" code="kg">Kyrgyzstan</option>
        <option value="119" code="la">Lao People's Democratic Republic</option>
        <option value="120" code="lv">Latvia</option>
        <option value="121" code="lb">Lebanon</option>
        <option value="122" code="ls">Lesotho</option>
        <option value="123" code="lr">Liberia</option>
        <option value="124" code="ly">Libyan Arab Jamahiriya</option>
        <option value="125" code="li">Liechtenstein</option>
        <option value="126" code="lt">Lithuania</option>
        <option value="127" code="lu">Luxembourg</option>
        <option value="128" code="mo">Macao</option>
        <option value="129" code="mk">Macedonia</option>
        <option value="130" code="mg">Madagascar</option>
        <option value="131" code="mw">Malawi</option>
        <option value="132" code="my">Malaysia</option>
        <option value="133" code="mv">Maldives</option>
        <option value="134" code="ml">Mali</option>
        <option value="135" code="mt">Malta</option>
        <option value="136" code="mh">Marshall Islands</option>
        <option value="137" code="mq">Martinique</option>
        <option value="138" code="mr">Mauritania</option>
        <option value="139" code="mu">Mauritius</option>
        <option value="140" code="yt">Mayotte</option>
        <option value="141" code="mx">Mexico</option>
        <option value="142" code="fm">Micronesia, Federated States Of</option>
        <option value="143" code="md">Moldova</option>
        <option value="144" code="mc">Monaco</option>
        <option value="145" code="mn">Mongolia</option>
        <option value="146" code="me">Montenegro</option>
        <option value="147" code="ms">Montserrat</option>
        <option value="148" code="ma">Morocco</option>
        <option value="149" code="mz">Mozambique</option>
        <option value="150" code="mm">Myanmar</option>
        <option value="151" code="na">Namibia</option>
        <option value="152" code="nr">Nauru</option>
        <option value="153" code="np">Nepal</option>
        <option value="154" code="nl">Netherlands</option>
        <option value="155" code="an">Netherlands Antilles</option>
        <option value="156" code="nc">New Caledonia</option>
        <option value="157" code="nz">New Zealand</option>
        <option value="158" code="ni">Nicaragua</option>
        <option value="159" code="ne">Niger</option>
        <option value="160" code="ng">Nigeria</option>
        <option value="161" code="nu">Niue</option>
        <option value="162" code="nf">Norfolk Island</option>
        <option value="163" code="mp">Northern Mariana Islands</option>
        <option value="164" code="no">Norway</option>
        <option value="165" code="om">Oman</option>
        <option value="166" code="pk">Pakistan</option>
        <option value="167" code="pw">Palau</option>
        <option value="168" code="ps">Palestinian Territory, Occupied</option>
        <option value="169" code="pa">Panama</option>
        <option value="170" code="pg">Papua New Guinea</option>
        <option value="171" code="py">Paraguay</option>
        <option value="172" code="pe">Peru</option>
        <option value="173" code="ph">Philippines</option>
        <option value="174" code="pn">Pitcairn</option>
        <option value="175" code="pl">Poland</option>
        <option value="176" code="pt">Portugal</option>
        <option value="177" code="pr">Puerto Rico</option>
        <option value="178" code="qa">Qatar</option>
        <option value="179" code="re">Reunion</option>
        <option value="180" code="ro">Romania</option>
        <option value="181" code="ru">Russian Federation</option>
        <option value="182" code="rw">Rwanda</option>
        <option value="183" code="bl">Saint Barthelemy</option>
        <option value="184" code="sh">Saint Helena</option>
        <option value="185" code="kn">Saint Kitts And Nevis</option>
        <option value="186" code="lc">Saint Lucia</option>
        <option value="187" code="mf">Saint Martin</option>
        <option value="188" code="pm">Saint Pierre And Miquelon</option>
        <option value="189" code="vc">Saint Vincent And Grenadines</option>
        <option value="190" code="ws">Samoa</option>
        <option value="191" code="sm">San Marino</option>
        <option value="192" code="st">Sao Tome And Principe</option>
        <option value="193" code="sa">Saudi Arabia</option>
        <option value="194" code="sn">Senegal</option>
        <option value="195" code="rs">Serbia</option>
        <option value="196" code="sc">Seychelles</option>
        <option value="197" code="sl">Sierra Leone</option>
        <option value="198" code="sg">Singapore</option>
        <option value="199" code="sk">Slovakia</option>
        <option value="200" code="si">Slovenia</option>
        <option value="201" code="sb">Solomon Islands</option>
        <option value="202" code="so">Somalia</option>
        <option value="203" code="za">South Africa</option>
        <option value="204" code="gs">South Georgia And Sandwich Isl.</option>
        <option value="205" code="es">Spain</option>
        <option value="206" code="lk">Sri Lanka</option>
        <option value="207" code="sd">Sudan</option>
        <option value="208" code="sr">Suriname</option>
        <option value="209" code="sj">Svalbard And Jan Mayen</option>
        <option value="210" code="sz">Swaziland</option>
        <option value="211" code="se">Sweden</option>
        <option value="212" code="ch">Switzerland</option>
        <option value="213" code="sy">Syrian Arab Republic</option>
        <option value="214" code="tw">Taiwan</option>
        <option value="215" code="tj">Tajikistan</option>
        <option value="216" code="tz">Tanzania</option>
        <option value="217" code="th">Thailand</option>
        <option value="218" code="tl">Timor-Leste</option>
        <option value="219" code="tg">Togo</option>
        <option value="220" code="tk">Tokelau</option>
        <option value="221" code="to">Tonga</option>
        <option value="222" code="tt">Trinidad And Tobago</option>
        <option value="223" code="tn">Tunisia</option>
        <option value="224" code="tr">Turkey</option>
        <option value="225" code="tm">Turkmenistan</option>
        <option value="226" code="tc">Turks And Caicos Islands</option>
        <option value="227" code="tv">Tuvalu</option>
        <option value="228" code="ug">Uganda</option>
        <option value="229" code="ua">Ukraine</option>
        <option value="230" code="ae">United Arab Emirates</option>
        <option value="231" code="gb">United Kingdom</option>
        <option value="232" code="us">United States</option>
        <option value="233" code="um">United States Outlying Islands</option>
        <option value="234" code="uy">Uruguay</option>
        <option value="235" code="uz">Uzbekistan</option>
        <option value="236" code="vu">Vanuatu</option>
        <option value="237" code="ve">Venezuela</option>
        <option value="238" code="vn">Viet Nam</option>
        <option value="239" code="vg">Virgin Islands, British</option>
        <option value="240" code="vi">Virgin Islands, U.S.</option>
        <option value="241" code="wf">Wallis And Futuna</option>
        <option value="242" code="eh">Western Sahara</option>
        <option value="243" code="ye">Yemen</option>
        <option value="244" code="zm">Zambia</option>
        <option value="245" code="zw">Zimbabwe</option>
    </select>

    <div>
        <input type="text" name="address" class="input address-suggester" autocomplete="off" placeholder="City, Street">
        <div class="suggester-map-div" style="height: 200px; display: none; margin: 10px 0px; background: transparent;">
        </div>
        <div class="alert alert-warning geoip-hint mobile" style="display: none; margin: 10px 0px;">
            Please enter a valid address for your practice (including street name and number)
        </div>
    </div>

    <div class="flex input-flex" style="
    /* display: block; */
">
        <div>
            <span class="phone-code-holder">+543+543+543+543+543</span>
        </div>
        <div style="flex: 1;">
            <input type="text" name="phone" id="dentist-tel" placeholder="Phone number" class="input">
        </div>
    </div>
    <input type="text" name="website" placeholder="Website" id="dentist-website" class="input">
    <div class="form-info clearfix">
        <a class="back" href="javascript:;">&lt; back</a>
        <a href="javascript:;" class="button next go-to-next" data-validator="https://reviews.dentacoin.com/en/register/step2/">Next</a>
    </div>
</div>

<script>
    var mapsLoaded = true;
    var mapsWaiting = [];



    //
    //Maps stuff
    //


    var prepareMapFucntion = function( callback ) {
        console.log('prepareMapFucntion');
        if(mapsLoaded) {
            console.log('prepareMapFucntion', '1');
            callback();
        } else {
            console.log('prepareMapFucntion', '2');
            mapsWaiting.push(callback);
        }
    }

    var initMap = function () {
        console.log('initMap');
        mapsLoaded = true;
        for(var i in mapsWaiting) {
            mapsWaiting[i]();
        }

        $('.map').each( function(){
            var address = $(this).attr('data-address') ;

            var geocoder = new google.maps.Geocoder();
            geocoder.geocode( { 'address': address}, (function(results, status) {
                console.log(address);
                console.log(status);
                if (status == google.maps.GeocoderStatus.OK) {
                    if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
                        var position = {
                            lat: results[0].geometry.location.lat(),
                            lng: results[0].geometry.location.lng()
                        };

                        map = new google.maps.Map($(this)[0], {
                            center: position,
                            scrollwheel: false,
                            zoom: 15
                        });

                        new google.maps.Marker({
                            position: position,
                            map: map,
                            title: results[0].formatted_address
                        });

                    } else {
                        console.log('456');
                        $(this).remove();
                    }
                } else {
                    console.log('123');
                    $(this).remove();
                }
            }).bind( $(this) )  );

        });
    }




    var initAddressSuggesters;

    jQuery(document).ready(function($){

        initAddressSuggesters = function() {
            console.log('initAddressSuggesters');

            prepareMapFucntion( function() {
                console.log('prepareMapFucntion');

                $('.address-suggester').each( function() {
                    var conatiner = $(this).closest('.address-suggester-wrapper');

                    conatiner.find('.country-select').change( function() {
                        var cc = $(this).find('option:selected').attr('code');
                        GMautocomplete.setComponentRestrictions({
                            'country': cc
                        });
                    } );


                    if( conatiner.find('.suggester-map-div').attr('lat') ) {
                        var coords = {
                            lat: parseFloat( conatiner.find('.suggester-map-div').attr('lat') ),
                            lng: parseFloat( conatiner.find('.suggester-map-div').attr('lon') )
                        };

                        conatiner.find('.suggester-map-div').show();
                        var profile_address_map = new google.maps.Map( conatiner.find('.suggester-map-div')[0], {
                            center: coords,
                            zoom: 14,
                            backgroundColor: 'none'
                        });

                        var marker = new google.maps.Marker({
                            map: profile_address_map,
                            center: coords,
                        });
                    }


                    var input = $(this)[0];
                    var cc = conatiner.find('.country-select option:selected').attr('code');
                    var options = {
                        componentRestrictions: {
                            country: cc
                        },
                        types: ['address']
                    };

                    console.log('hmm');

                    var GMautocomplete = new google.maps.places.Autocomplete(input, options);
                    GMautocomplete.conatiner = conatiner;
                    google.maps.event.addListener(GMautocomplete, 'place_changed', (function () {
                        var place = this.getPlace();

                        this.conatiner.find('.address-suggester').blur();
                        this.conatiner.find('.geoip-hint').hide();
                        this.conatiner.find('.suggester-map-div').hide();

                        if( place && place.geometry ) {
                            //address_components
                            console.log(place);
                            console.log( place.formatted_address )
                            console.log( place.types ); //street_address
                            console.log( place.geometry.location.lat() )
                            console.log( place.geometry.location.lng() )


                            if( place.types.indexOf('street_address')!=-1 || place.types.indexOf('street_number')!=-1 ) {
                                var cname = '';
                                var newaddress = place.name + ', ' + place.vicinity;
                                this.conatiner.find('.address-suggester').val(newaddress);

                                prepareMapFucntion( (function() {
                                    var coords = {
                                        lat: place.geometry.location.lat(),
                                        lng: place.geometry.location.lng()
                                    };

                                    this.conatiner.find('.suggester-map-div').show();
                                    var profile_address_map = new google.maps.Map( this.conatiner.find('.suggester-map-div')[0], {
                                        center: coords,
                                        zoom: 14,
                                        backgroundColor: 'none'
                                    });

                                    var marker = new google.maps.Marker({
                                        map: profile_address_map,
                                        center: coords,
                                    });

                                }).bind(this) );

                                return;
                            }

                        }

                        this.conatiner.find('.geoip-hint').show();
                    }).bind(GMautocomplete));

                } )

            });

            $('.address-suggester').on('keyup keypress', function(e) {
                var keyCode = e.keyCode || e.which;
                if (keyCode === 13) {
                    e.preventDefault();
                    return false;
                }
            });
        }

        if( $('.address-suggester').length ) {
            initAddressSuggesters();
        }
    });


    function trimChar (str, c) {
        if (c === "]") c = "\\]";
        if (c === "\\") c = "\\\\";
        return str.replace(new RegExp(
            "^[" + c + "]+|[" + c + "]+$", "g"
        ), "");
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaVeHq_LOhQndssbmw-aDnlMwUG73yCdk&amp;libraries=places&amp;callback=initMap&amp;language=en"></script>
</body>
</html>